{% comment "Copyright" %}
Copyright (c) 2024 eContriver LLC

This file is part of Capital Copilot by eContriver LLC and is released under the MIT License.
See the LICENSE file in the root of this project for the full license text.
{% endcomment %}

{% load i18n %}
{% load static %}

<header class="w-full">
    <nav x-data="{ open: false, accountMenuOpen: false }" class="bg-stone-800">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex items-center justify-between h-16">
                <div class="flex items-center">
                    <a href="{% url 'home_page' %}" class="flex-shrink-0">
                        <img src="{% static 'images/Capital_Copilot_Logo_Slanted.png' %}" alt="Capital Copilot" class="h-16 w-auto">
                    </a>
                </div>
                <div class="hidden md:block">
                    <div class="ml-10 flex items-baseline space-x-4">
                        <!-- Desktop Menu Items -->
                        {% for item in menu_items %}
                            <a href="{{ item.link }}" class="text-stone-300 hover:bg-stone-700 hover:text-white px-3 py-2 rounded-md text-sm font-medium">{{ item.name }}</a>
                        {% endfor %}
                        {% if request.user.is_authenticated %}
                        <div x-data="{ open: false, closeTimeout: null }" class="relative">
                            <button @mouseenter="clearTimeout(closeTimeout); open = true" @mouseleave="closeTimeout = setTimeout(() => { open = false }, 200)" class="flex items-center text-stone-300 hover:bg-stone-700 hover:text-white px-3 py-2 rounded-md text-sm font-medium">
                                {{ request.user.email }}
                                <svg class="ml-2 w-4 h-4" fill="none" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" viewBox="0 0 24 24" stroke="currentColor">
                                    <path d="M19 9l-7 7-7-7"></path>
                                </svg>
                            </button>
                            <div x-show="open" @mouseenter="clearTimeout(closeTimeout)" @mouseleave="closeTimeout = setTimeout(() => { open = false }, 200)" class="absolute mt-1 w-48 bg-stone-700 rounded-md shadow-lg py-1 z-50">
                                {% for item in account_menu_items %}
                                <a href="{{ item.link }}" class="block px-4 py-2 text-sm text-stone-300 hover:bg-stone-600">{{ item.name }}</a>
                                {% endfor %}
                            </div>
                        </div>
                        {% else %}
                        {% for item in account_menu_items %}
                        <a href="{{ item.link }}" class="text-stone-300 hover:bg-stone-700 hover:text-white px-3 py-2 rounded-md text-sm font-medium">{{ item.name }}</a>
                        {% endfor %}
                        {% endif %}
                    </div>
                </div>
                <div class="-mr-2 flex md:hidden">
                    <!-- Mobile menu button -->
                    <button @click="open = !open" class="bg-stone-800 inline-flex items-center justify-center p-2 rounded-md text-stone-400 hover:text-white hover:bg-stone-700">
                        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-menu"><line x1="4" x2="20" y1="12" y2="12"/><line x1="4" x2="20" y1="6" y2="6"/><line x1="4" x2="20" y1="18" y2="18"/></svg>
                    </button>
                </div>
                <div x-data="darkMode()" x-init="init()" class="bg-stone-800 inline-flex items-center justify-center p-2 rounded-full hover:text-white hover:bg-stone-700 cursor-pointer">
                    <button @click="toggleDarkMode()" class="relative w-14 h-8 rounded-full bg-stone-600">
                        <div :class="{'translate-x-6': !dark, 'no-transition': noTransition}" class="absolute top-1 left-1 w-6 h-6 bg-stone-800 rounded-full flex items-center justify-center transition-transform duration-300 icon-container">
                            <svg x-show="dark" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-moon w-5 h-5 text-stone-400"> <path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"></path> </svg>
                            <svg x-show="!dark" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-sun w-5 h-5 text-yellow-500"> <circle cx="12" cy="12" r="5"></circle> <line x1="12" y1="1" x2="12" y2="3"></line> <line x1="12" y1="21" x2="12" y2="23"></line> <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line> <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line> <line x1="1" y1="12" x2="3" y2="12"></line> <line x1="21" y1="12" x2="23" y2="12"></line> <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line> <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line> </svg>
                        </div>
                    </button>
                </div>
            </div>
        </div>

        <!-- Mobile Menu -->
        <div x-show="open" class="md:hidden">
            <div class="px-2 pt-2 pb-3 space-y-1 sm:px-3">
                {% for item in menu_items %}
                <a href="{{ item.link }}" class="text-stone-300 hover:bg-stone-700 hover:text-white block px-3 py-2 rounded-md text-base font-medium">{{ item.name }}</a>
                {% endfor %}
                {% for item in account_menu_items %}
                <a href="{{ item.link }}" class="text-stone-300 hover:bg-stone-700 hover:text-white block px-3 py-2 rounded-md text-base font-medium">{{ item.name }}</a>
                {% endfor %}
            </div>
        </div>
    </nav>
</header>